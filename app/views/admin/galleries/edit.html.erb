<div class="w-full flex flex-col lg:flex-row gap-8">

  <%# Column 1: The Edit Form %>
  <div class="lg:w-1/3">
    <div class="form-card">
      <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">Edit Gallery</h1>
      <%= render "form" %>
    </div>
  </div>

  <%# Column 2: The Photo Manager %>
  <div class="lg:w-2/3">
    <div class="form-card">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Manage Photos</h2>
        <%= link_to "Add New Photo", new_admin_gallery_photo_path(@gallery), class: "form-submit w-auto" %>
      </div>

      <div class="admin-photo-list grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 place-items-start">
        <% @photos.each do |photo| %>
          <div class="admin-photo-item group">
            <% if photo.image.attached? %>
            <div class="relative inline-block">
              <%= image_tag photo.image.variant(resize_to_fill: [200, 200]), class: "rounded-lg" %>
              
              <div class="absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity">
                <%= link_to "Ã—", 
                      admin_gallery_photo_path(@gallery, photo), 
                      class: "flex items-center justify-center w-6 h-6 bg-red-600 text-white font-bold rounded-full text-sm",
                      data: { 
                        turbo_method: :delete, 
                        turbo_confirm: "Are you sure?" 
                      } %>
              </div>
            </div>
            <% end %>
            
            <p class="text-xs text-center mt-1 truncate"><%= photo.title %></p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>